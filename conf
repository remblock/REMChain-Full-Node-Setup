full_node_domain="remblock2.io"
email_contact="contact@remblock.io"

echo 'server {
listen 443 ssl;
listen 80 default_server;
listen [::]:80 default_server;
server_name $full_node_domain;
server_alias $full_node_domain;  
client_max_body_size 500m;
document_root /var/www/$full_node_domain;
access_log /var/log/nginx/$full_node_domain.access.log;
error_log /var/log/nginx/$full_node_domain.error.log;
add_header "Access-Control-Allow-Origin" "*";
# add_header "Access-Control-Allow-Credentials" "true";
add_header "Access-Control-Allow-Headers" "Origin, X-Requested-With, Content-Type,
Authorization, X-Custom-Header, token, timestamp, version";
add_header "Access-Control-Expose-Headers" "*";
add_header "Access-Control-Allow-Methods" "*";
add_header "Access-Control-Max-Age" 600;
add_header "Allow" "GET, HEAD, POST, PUT, DELETE, TRACE, OPTIONS, PATCH";
add_header "Vary" "Origin";
location / {
proxy_pass http://127.0.0.1:8888/v1/chain/get_info;
proxy_set_header X-Real-IP $remote_addr;
proxy_set_header X-Forwarded-For $remote_addr;
proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
proxy_set_header Host $host;
proxy_redirect off;
proxy_headers_hash_bucket_size 128;
}
location /v2 {
proxy_pass http://127.0.0.1:7000/v2;
add_header "Access-Control-Allow-Origin" "";
proxy_set_header X-Real-IP $remote_addr;
proxy_set_header X-Forwarded-For $remote_addr;
proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
proxy_set_header Host $host;
proxy_redirect off;
proxy_headers_hash_bucket_size 128;
}
location /v1/history {
proxy_pass http://127.0.0.1:7000/v1/history;
proxy_set_header X-Real-IP $remote_addr;
proxy_set_header X-Forwarded-For $remote_addr;
proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
proxy_set_header Host $host;
proxy_redirect off;
proxy_headers_hash_bucket_size 128;
}
location /v1 {
proxy_pass http://127.0.0.1:8888;
proxy_set_header X-Real-IP $remote_addr;
proxy_set_header X-Forwarded-For $remote_addr;
proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
proxy_set_header Host $host;
proxy_redirect off;
proxy_headers_hash_bucket_size 128;
}
}' > /etc/nginx/sites-available/$full_node_domain.conf

